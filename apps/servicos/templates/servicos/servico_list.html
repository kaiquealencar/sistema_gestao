{% extends "base.html" %}
{% load humanize %}

{% block title %}Lista de Serviços{% endblock %}

{% block content %}
    <h1>Lista de Serviços</h1>
    <br>

    <a href="{% url 'servicos:servico_create' %}"
       class="btn btn-primary mb-3">
        Novo Serviço
    </a>

    <table class="table table-striped table-hover align-middle">
        <thead class="table-dark">
            <tr>
                <th>Nome</th>
                <th>Descrição</th>
                <th>Preço</th>
                <th>Disponível</th>
                <th>Ativo</th>
                <th class="text-center">Ações</th>
            </tr>
        </thead>

        <tbody>
            {% for servico in servicos %}
                <tr>
                    <td>{{ servico.nome }}</td>

                    <td>{{ servico.descricao }}</td>

                    <td>
                        R$ {{ servico.preco|floatformat:2|intcomma }}
                    </td>

                    <td>
                        {% if servico.disponivel %}
                            <span class="badge bg-info">Sim</span>
                        {% else %}
                            <span class="badge bg-secondary">Não</span>
                        {% endif %}
                    </td>

                    <td>
                        {% if servico.ativo %}
                            <span class="badge bg-success">Ativo</span>
                        {% else %}
                            <span class="badge bg-danger">Inativo</span>
                        {% endif %}
                    </td>

                    <td class="text-center">
                        <div class="btn-group" role="group" aria-label="Ações">
                            <a href="{% url 'servicos:servico_edit' servico.id %}"
                               class="btn btn-sm btn-primary rounded-pill me-2">
                                Editar
                            </a>

                       <a href="#"
                          class="btn btn-sm btn-danger"
                          data-bs-toggle="modal"
                          data-bs-target="#confirmDeleteModal"
                          data-name="{{ servico.nome }}"
                          data-action="{% url 'servicos:servico_delete' servico.id %}">
                            Excluir
                       </a>
                        </div>
                    </td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="6" class="text-center text-muted">
                        Nenhum serviço cadastrado.
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
